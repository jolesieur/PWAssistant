<!doctype html>
<html lang="en">

<head>
    <!-- <link rel="manifest" href="manifest.json" />-->
    <!-- ios support -->
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PWAssistant">
    <meta name="apple-mobile-web-app-status-bar-style" content="#2196F3">
    <link rel="apple-touch-icon" href="drop.png">
    <link rel="apple-touch-icon" sizes="180x180" href="drop-180x180.png">
    <link href="apple_splash_750.png" sizes="750x1334" rel="apple-touch-startup-image" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>Pure Water Assistant</title>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="icon" href="favicon.ico" sizes="16x16" type="image/png">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="navbar-top-fixed.css" rel="stylesheet">

    <script src="js/gijgo.min.js" type="text/javascript"></script>
    <link href="css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <script src="js/messages.fr-fr.js" type="text/javascript"></script>

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        h1 {
            font-size: 2.5rem;
        }

        h3 {
            font-size: 1.8rem;
        }

        @media all and (max-device-width: 760px) {
            h1 {
                font-size: 1.5rem;
            }

            h3 {
                font-size: 1.2rem;
            }
        }


        .noselect {
            -webkit-touch-callout: none;
            /* iOS Safari */
            -webkit-user-select: none;
            /* Safari */
            -khtml-user-select: none;
            /* Konqueror HTML */
            -moz-user-select: none;
            /* Old versions of Firefox */
            -ms-user-select: none;
            /* Internet Explorer/Edge */
            user-select: none;
            /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
        }

        /* selected btn css */
        .btn-group-toggle .btn:not(:disabled):not(.disabled).active,
        .btn-group-toggle .btn:not(:disabled):not(.disabled):active,
        .show>.btn.dropdown-toggle {
            color: #fff;
            background-color: #2196F3;
            border-color: #2196F3;
        }

        /* non selected btn css */
        .btn-group-toggle .btn {
            color: #fff;
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .days {
            font-size: 10px;
            color: white;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-md  navbar-dark bg-dark fixed-top">
        <span class="navbar-brand noselect">PW<i class="fas fa-tint" style="font-size:25px;color:#2196F3"></i>Assistant<br></span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto" id="myTab">

                <li class="nav-item">
                    <a class="nav-link  active" id="tab-1" data-toggle="tab" role="tab" href="#content-1">Accueil</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id="tab-2" data-toggle="tab" role="tab" href="#content-2">Inspection</a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Remplacement</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" id="tab-6" data-toggle="tab" role="tab" href="#content-6">Hémodialyse</a>
                        <a class="dropdown-item" id="tab-7" data-toggle="tab" role="tab" href="#content-7">Laboratoire</a>
                        <a class="dropdown-item" id="tab-8" data-toggle="tab" role="tab" href="#content-8">Endoscopie</a>
                    </div>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id="tab-4" data-toggle="tab" role="tab" href="#content-4">Historique</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-md-0">
                <input class="form-control" type="text" placeholder="Search">
            </form>
        </div>
    </nav>

    <main class="container">
        <div class="tab-content bg-light p-5 rounded">
            <div class="tab-pane fade  show active " id="content-1" aria-labelledby="tab-1" role="tabpanel">
                <h1>Accueil</h1>
                <p class="lead">This example is a quick exercise to illustrate how fixed to top navbar works. As you scroll, it will remain fixed to the top of your browser’s viewport.</p>
            </div>
            <div class="tab-pane fade" id="content-2" aria-labelledby="tab-2" role="tabpanel">
                <h1>Inspection</h1>
                <p class="lead">This example is a quick exercise to illustrate how fixed to top navbar works. As you scroll, it will remain fixed to the top of your browser’s viewport.</p>
            </div>
            <div class="tab-pane fade" id="content-3" aria-labelledby="tab-3" role="tabpanel">
                <h1>Remplacement</h1>
                <p class="lead">This example is a quick exercise to illustrate how fixed to top navbar works. As you scroll, it will remain fixed to the top of your browser’s viewport.</p>
            </div>
            <div class="tab-pane fade" id="content-4" aria-labelledby="tab-4" role="tabpanel">
                <h1>Historique</h1>
                <p class="lead">This example is a quick exercise to illustrate how fixed to top navbar works. As you scroll, it will remain fixed to the top of your browser’s viewport.</p>
            </div>
            <div class="tab-pane fade" id="content-6" aria-labelledby="tab-6" role="tabpanel">
                <h1>Hémodialyse</h1>
                <div class="d-flex h-100">
                    <div class="m-auto">
                        <h3 class="d-flex d-flex-column text-center">Remplacement des filtres</h3>

                        <!--
                        <nav class="navbar navbar-expand-lg navbar-light bg-light">
                            <span>Selection</span>
                            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse8">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarCollapse8">
                                <ul class="navbar-nav mr-auto" id="myTab">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="tab-filtres" data-toggle="tab" role="tab" href="#content-filtres">Pré-traitement</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-charbon" data-toggle="tab" role="tab" href="#content-charbon">Osmoses portatives</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-charbon" data-toggle="tab" role="tab" href="#content-charbon">Osmoses portatives</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-charbon" data-toggle="tab" role="tab" href="#content-charbon">Osmoses portatives</a>
                                    </li>
                                </ul>
                            </div>
                        </nav>
-->
                        <ul class="nav flex-column text-center">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">
                                    <span id="show">Pré-traitement</span></a>
                                <div class="dropdown-menu w-100 text-center dropdown1">
                                    <a class="dropdown-item" id="tab-filtres" data-toggle="tab" role="tab" href="#content-filtres">Pré-traitement</a>
                                    <a class="dropdown-item" id="tab-charbon2" data-toggle="tab" role="tab" href="#content-charbon">Charbon</a>
                                    <a class="dropdown-item" id="tab-charbon3" data-toggle="tab" role="tab" href="#content-resines">Osmoses portatives</a>
                                </div>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane show active fade" id="content-filtres" role="tabpanel">
                                <form id="form-filtres">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Pré-traitement</label>
                                        <div id="sediments" class="btn-group btn-group-toggle col-10 col-md-6 align-self-center" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Osmose portative FR1</label>
                                        <div id="osmose" class="btn-group btn-group-toggle  col-10 col-md-6 align-self-center" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Osmose portative FR2</label>
                                        <div id="osmose" class="btn-group btn-group-toggle  col-10 col-md-6 align-self-center" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Osmose portative FR3</label>
                                        <div id="osmose" class="btn-group btn-group-toggle  col-10 col-md-6 align-self-center" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Osmose portative FR4</label>
                                        <div id="osmose" class="btn-group btn-group-toggle  col-10 col-md-6 align-self-center" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group text-center">
                                        <input id="dt-filtres" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <div class="col-8 align-self-center">
                                            <input id="datepicker" style="text-align: center;">
                                        </div>
                                    </div>

                                    <div class="form-group text-center">
                                        <button id="laboratoires.filtres" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="content-charbon" role="tabpanel">
                                <form id="form-charbon">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Filtres au charbon</label>
                                        <div id="charbon" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="c1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="c1" autocomplete="off"> 1 <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="c2" class="btn btn-outline-primary">
                                                <input type="checkbox" name="c2" autocomplete="off"> 2 <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-charbon" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="laboratoires.charbon" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="content-resines" role="tabpanel">
                                <form id="form-resines">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Résines de déionisation</label>
                                        <div id="resines" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="r1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="r1" autocomplete="off"> 1 <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="r2" class="btn btn-outline-primary">
                                                <input type="checkbox" name="r2" autocomplete="off"> 2 <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-resines" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="laboratoires.resines" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade laboratoires" id="content-7" aria-labelledby="tab-7" role="tabpanel">
                <h1>Laboratoires</h1>
                <div class="d-flex h-100">
                    <div class="m-auto">
                        <h3 class="d-flex flex-column text-center">Remplacement des filtres</h3>

                        <ul class="nav nav-pills nav-fill">
                            <li class="nav-item">
                                <a class="nav-link active" id="tab-filtres" data-toggle="tab" role="tab" href="#content-filtres">Filtres</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-charbon" data-toggle="tab" role="tab" href="#content-charbon">Charbon</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-resines" data-toggle="tab" role="tab" href="#content-resines">Résines</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane show active fade" id="content-filtres" role="tabpanel">
                                <form id="form-filtres">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Filtres à sédiments</label>
                                        <div id="sediments" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f5" autocomplete="off"> 5 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Filtre de l'osmose</label>
                                        <div id="osmose" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Filtres à endotoxines</label>
                                        <div id="filtres01" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f01" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f01" autocomplete="off"> 0.1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-filtres" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="laboratoires.filtres" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="content-charbon" role="tabpanel">
                                <form id="form-charbon">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Filtres au charbon</label>
                                        <div id="charbon" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="c1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="c1" autocomplete="off"> 1 <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="c2" class="btn btn-outline-primary">
                                                <input type="checkbox" name="c2" autocomplete="off"> 2 <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-charbon" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="laboratoires.charbon" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="content-resines" role="tabpanel">
                                <form id="form-resines">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Résines de déionisation</label>
                                        <div id="resines" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="r1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="r1" autocomplete="off"> 1 <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="r2" class="btn btn-outline-primary">
                                                <input type="checkbox" name="r2" autocomplete="off"> 2 <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-resines" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="laboratoires.resines" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade endoscopie" id="content-8" aria-labelledby="tab-8" role="tabpanel">
                <h1>Endoscopie</h1>
                <div class="d-flex h-100">
                    <div class="m-auto">
                        <h3 class="d-flex flex-column text-center">Remplacement des filtres</h3>

                        <ul class="nav nav-pills nav-fill">
                            <li class="nav-item">
                                <a class="nav-link active" id="tab-medivator" data-toggle="tab" role="tab" href="#content-medivator">Medivator</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-system1" data-toggle="tab" role="tab" href="#content-system1">System 1</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane show active fade" id="content-medivator" role="tabpanel">
                                <form id="form-medivator">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Medivator 1</label>
                                        <div id="medivator1" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f01" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f01" autocomplete="off"> 0.1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f04" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f04" autocomplete="off"> 0.4 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="f1" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Medivator 2</label>
                                        <div id="medivator2" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f01" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 0.1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f04" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 0.4 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">Medivator 3</label>
                                        <div id="medivator3" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f01" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 0.1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f04" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 0.4 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="f1" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> 1 µm <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-medivator" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="endoscopie.medivator" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="content-system1" role="tabpanel">
                                <form id="form-system1">
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">SYSTEM 1 #7</label>
                                        <div id="system1_7" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> Pré-filtre <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="fa" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> A <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="fb" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> B <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group d-flex flex-column text-center">
                                        <label class="col-form-label">SYSTEM 1 #8</label>
                                        <div id="system1_8" class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <label id="f5" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> Pré-filtre <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="fa" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> A <br>
                                                <span class="days">365</span>
                                            </label>
                                            <label id="fb" class="btn btn-outline-primary">
                                                <input type="checkbox" name="options" autocomplete="off"> B <br>
                                                <span class="days">365</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group text-center">
                                        <input id="dt-system1" type="date" class="datePicker">
                                    </div>
                                    <div class="form-group text-center">
                                        <button id="endoscopie.system1" type="button" class="btn btn-success" disabled>
                                            Valider</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Success Alert -->
            <div id="success-alert" class="alert alert-success d-none" role="alert">
                Donnés sauvegardées dans la base de données.
            </div>
            <!-- Error Alert -->
            <div id="error-alert" class="alert alert-danger d-none" role="alert">
                <strong>Erreur!</strong> Un problème est survenu lors de la transmission des données.
                <button type="button" class="close alert-close">&times;</button>
            </div>
        </div>
    </main>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAhnI6Wuxy9-lCaaz8NeIah6GieElHfGgY",
            authDomain: "pwassistant-f0c9f.firebaseapp.com",
            databaseURL: "https://pwassistant-f0c9f-default-rtdb.firebaseio.com",
            projectId: "pwassistant-f0c9f",
            storageBucket: "pwassistant-f0c9f.appspot.com",
            messagingSenderId: "129191690225",
            appId: "1:129191690225:web:58020b5b07133ebfedce50",
            measurementId: "G-YCJ886VJQ6"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        const db = firebase.firestore()
        var jsons = new Object();
        //var json_obj = new Object();
        var json_obj = new Object();

        db.collection("endoscopie")
            .onSnapshot(function(querySnapshot) {
                var _json_obj = new Object();
                querySnapshot.forEach(function(doc) {
                    //$.extend(jsons, JSON.parse(doc.data().filtres));

                    var raw = JSON.parse(doc.data().data);
                    _json_obj[doc.id] = raw;
                });
                json_obj["endoscopie"] = _json_obj;
                //console.log("db read: ", json_obj);
                updateFields("endoscopie");
            });

        db.collection("laboratoires")
            .onSnapshot(function(querySnapshot) {
                var _json_obj = new Object();
                querySnapshot.forEach(function(doc) {
                    //$.extend(jsons, JSON.parse(doc.data().filtres));

                    var raw = JSON.parse(doc.data().data);
                    _json_obj[doc.id] = raw;
                });
                json_obj["laboratoires"] = _json_obj;
                console.log(json_obj);
                //console.log("db read: ", json_obj);
                updateFields("laboratoires");
            });

        /*
        {
        "medivator1" : {   
                        "f01": [1609480800000],
                        "f04": [1609480800000],
                        "f1": [1609480800000]
                        },
        "medivator2" : {   
                        "f01": [1609480800000],
                        "f04": [1609480800000],
                        "f1": [1609480800000]
                        },
        "medivator3" : {   
                        "f01": [1609480800000],
                        "f04": [1609480800000],
                        "f1": [1609480800000]
                        }                
        }
        
       {
       "system1_7" : {
       "f5": [1609480800000],
       "fa": [1609480800000],
       "fb": [1609480800000]
       },
       "system1_8" : {
       "f5": [1609480800000],
       "fa": [1609480800000],
       "fb": [1609480800000]
       }
       }
       
       {
        "sediments" : {   
                        "f5": [1609480800000],
                        "f1": [1609480800000]
                        },
        "osmose" : {   
                        "f1": [1609480800000]
                        },
        "filtres01" : {   
                        "f01": [1609480800000]
                        }                
        }
        
        {
       "charbon" : {
       "c1": [1609480800000],
       "c2": [1609480800000]
       }
       }
       
       {
       "resines" : {
       "r1": [1609480800000],
       "r2": [1609480800000]
       }
       }
        */
        var element = [];

        function updateFields(location) {
            $('.' + location + ' .days').each(function() {
                group = $(this).closest('form').attr('id').split("-").pop();
                equipment = $(this).closest('div').attr('id');
                item = $(this).closest('label').attr('id');

                if (json_obj[location][group][equipment][item].length > 0) {
                    timeDiff = daysdifference($.now(), json_obj[location][group][equipment][item][0]);
                } else {
                    timeDiff = 0;
                }
                $(this).text(timeDiff);
            });
        };
    </script>

    <script>
        $('#datepicker').datepicker({
            modal: true,
            header: true,
            footer: true,
            uiLibrary: 'bootstrap4',
            icons: {
                rightIcon: '<span class="fa fa-sort-down"></span>'
            },
            locale: 'fr-fr',
            format: 'yyyy-mm-dd'
        });


        $('.dropdown1 a').on('click', function() {
            $('#show').text($(this).text());
        });


        $(".navbar-nav .nav-item").on("click", function() {
            $(".navbar-nav .nav-item").find(".active").removeClass("active");
        });

        $('.navbar-nav li a').on('click', function() {
            if (!$(this).hasClass('dropdown-toggle')) {
                $('.navbar-collapse').collapse('hide');
            }
        });

        Date.prototype.toDateInputValue = (function() {
            var local = new Date(this);
            local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
            return local.toJSON().slice(0, 10);
        });


        $('input[type=checkbox]').change(function() {
            var senderFormID = $(this).closest('form').attr('id');

            var checked = $("#" + senderFormID + " input:checked").length > 0;
            if (checked) {
                $("#" + senderFormID + " .btn-success").removeAttr('disabled');
            } else {
                $("#" + senderFormID + " .btn-success").attr('disabled', 'disabled');
            }
        });


        function daysdifference(firstDate, secondDate) {
            var startDay = new Date(firstDate);
            var endDay = new Date(secondDate);

            var millisBetween = startDay.getTime() - endDay.getTime();
            var days = millisBetween / (1000 * 3600 * 24);

            return Math.floor(Math.abs(days));
        };


        $(function() {
            $(document).on('click', '.alert-close', function() {
                $(this).parent().hide();
            })
        });

        $(document).ready(function() {
            $('.datePicker').val(new Date().toDateInputValue());
            $('#datepicker').val(new Date().toDateInputValue());
            //  monitor tab change. code example / not implemented
            //            $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
            // switch (e.target.id) {
            // case "tab-8": {
            // //console.log("bingo")
            // break;
            // }
            // case "configTab": {
            // doConfigTabStuff();
            // break;
            // }
            // }
            // })


            $('.btn-success').on('click', function() {
                var ts = (+new Date($("#datepicker").val()));
                console.log(ts)

                var senderFormID = $(this).closest('form').attr('id');

                // Get datePicker value in milliseconds.
                var timestamp = (+new Date($("#" + senderFormID + " .datePicker").val()));
                //console.log("Timestamp :", timestamp); // DEBUG ONLY

                var checked = [];
                $("#" + senderFormID + " input:checked").each(function() {
                    var _checked = [($(this).closest('div').attr('id')), ($(this).closest('label').attr('id'))];
                    checked.push(_checked);
                });
                //console.log("Checked items :", checked); // DEBUG ONLY

                var location = $(this).attr('id').split(".");

                checked.forEach(function(item) {
                    json_obj[location[0]][location[1]][item[0]][item[1]].unshift(timestamp);
                    if (json_obj[location[0]][location[1]][item[0]][item[1]].length > 10) { // Remove oldest entry. Limit to 10 entry max.
                        json_obj[location[0]][location[1]][item[0]][item[1]].pop();
                    };
                });

                console.log("json_obj: ", json_obj); // DEBUG ONLY

                var newData = JSON.stringify(json_obj[location[0]][location[1]]);
                console.log("newData ", newData);

                var docRef = db.collection(location[0]).doc(location[1]).set({
                        data: newData
                    })
                    .then(function() { // Write successful
                        $('#error-alert').hide();
                        $('#success-alert').show();

                        if (document.getElementById('success-alert').classList.contains('d-none')) {
                            document.getElementById('success-alert').classList.remove('d-none');
                        }

                        $("#" + senderFormID + " :checkbox:enabled").prop('checked', false);
                        $("#" + senderFormID + " label").removeClass("active");
                        $("#" + senderFormID + " .btn-success").attr('disabled', 'disabled');

                        window.setTimeout(function() {
                            $('#success-alert').hide();
                            //document.getElementById('success-alert').classList.add('d-none');
                        }, 5000);
                    })
                    .catch(function(error) {
                        $('#error-alert').show();
                        if (document.getElementById('error-alert').classList.contains('d-none')) {
                            document.getElementById('error-alert').classList.remove('d-none');
                        }
                    });
            });
        });
    </script>
    <!--<script src="js/app.js"></script>-->
</body></html>
